webpackJsonp([1],{"54dn":function(e,t){},IfIm:function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i("j1ja");var n=i("/5sW"),a=i("woOf"),r=i.n(a),s=i("Dd8w"),o=i.n(s),l={name:"treeNode",props:{treeData:{type:Array,default:function(){return[]}},options:{type:Object,default:function(){}},treeSelectedResult:[Number,String]},data:function(){return{editable:this.options&&this.options.editable||!1,isDraggable:this.options&&this.options.draggable||!1}},watch:{options:{handler:function(e){this.editable=e.editable,this.isDraggable=e.draggable},deep:!0}},methods:{setNodeSelected:function(e){return!e.disabled&&(this.treeSelectedResult==e.id&&(!this.options.leafOnly||(!e.children||0===e.children.length)))},handleNodeExpand:function(e){n.a.set(e,"open",!e.open),this.$emit("on-toggle-branch")},handleAddNode:function(e){this.$emit("on-add-node",e)},handleEditNode:function(e){this.$emit("on-edit-node",e)},handleDeleteNode:function(e){this.$emit("on-delete-node",e)},handleCheckedChange:function(e){if(e.disabled)return!1;this.options.leafOnly&&e.children&&e.children.length?this.handleNodeExpand(e):this.$emit("on-checked-change",e)}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"sub-tree",class:{editable:e.editable}},e._l(e.treeData,function(t){return!t.hasOwnProperty("visible")||t.visible?i("li",{key:t.id,attrs:{draggable:e.isDraggable,"data-id":t.id}},[i("label",{staticClass:"node-content",class:{selected:e.setNodeSelected(t),disabled:t.disabled},attrs:{"data-id":t.id,"data-level":t.treeLevel,draggable:"false"},on:{click:function(i){e.handleCheckedChange(t)}}},[e.editable&&!t.disabled?[t.children&&0!==t.children.length?e._e():i("span",{staticClass:"for-editing"},[i("i",{staticClass:"icons icons-delete",on:{click:function(i){i.stopPropagation(),e.handleDeleteNode(t)}}})]),e._v(" "),i("span",{staticClass:"for-editing"},[t.treeLevel<e.options.maxLevel?i("i",{staticClass:"icons icons-plus",on:{click:function(i){i.stopPropagation(),e.handleAddNode(t)}}}):e._e(),e._v(" "),i("i",{staticClass:"icons icons-edit",on:{click:function(i){i.stopPropagation(),e.handleEditNode(t)}}})])]:e._e(),e._v(" "),t.children&&t.children.length?i("i",{staticClass:"icons",class:[t.open?"icons-fold":"icons-spread"],on:{click:function(i){i.stopPropagation(),e.handleNodeExpand(t)}}}):e._e(),e._v(" "),i("span",[e._v(e._s(t.label))])],2),e._v(" "),t.children&&t.children.length?i("tree-node",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"node.open"}],attrs:{"tree-data":t.children,options:e.options,"tree-selected-result":e.treeSelectedResult},on:{"on-checked-change":e.handleCheckedChange,"on-add-node":e.handleAddNode,"on-edit-node":e.handleEditNode,"on-delete-node":e.handleDeleteNode}}):e._e()],1):e._e()}))},staticRenderFns:[]};var c=i("VU/8")(l,d,!1,function(e){i("54dn")},"data-v-e739cc02",null).exports,h={name:"multipleTreeNode",props:{treeData:{type:Array,default:function(){return[]}},options:{type:Object,default:function(){}}},data:function(){return{isDraggable:this.options&&this.options.draggable||!1}},watch:{options:{handler:function(e){this.isDraggable=e.draggable},deep:!0}},methods:{handleNodeExpand:function(e){n.a.set(e,"open",!e.open),this.$emit("on-toggle-branch")},handleCheckedChange:function(e){this.$emit("on-checked-change",e)}}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"sub-tree"},e._l(e.treeData,function(t){return!t.hasOwnProperty("visible")||t.visible?i("li",{key:t.id,attrs:{"data-id":t.id,draggable:e.isDraggable}},[t.children&&t.children.length?i("i",{staticClass:"icons",class:[t.open?"icons-fold":"icons-spread"],on:{click:function(i){i.stopPropagation(),e.handleNodeExpand(t)}}}):e._e(),e._v(" "),i("label",{staticClass:"node-content checkbox-input",class:{"is-checked":t.checked,disabled:t.disabled},attrs:{"data-id":t.id,"data-level":t.treeLevel,draggable:"false"},on:{click:function(i){e.handleCheckedChange(t)}}},[i("span",{staticClass:"checkbox-inner"}),e._v(" "),i("span",{staticClass:"checkbox-text"},[e._v(e._s(t.label))])]),e._v(" "),t.children&&t.children.length?i("multiple-tree-node",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"node.open"}],attrs:{options:e.options,"tree-data":t.children},on:{"on-checked-change":e.handleCheckedChange}}):e._e()],1):e._e()}))},staticRenderFns:[]};var p=i("VU/8")(h,u,!1,function(e){i("hhLE")},"data-v-c12eacdc",null).exports,g=i("d7EF"),v=i.n(g),f=i("BO1k"),m=i.n(f),b=i("ifoU"),y=i.n(b),k=i("Zrlr"),S=i.n(k),C=i("wxAW"),N=i.n(C),x=function(){function e(t){var i=this;S()(this,e),this.datas=new y.a,this.originTreeData=t.treeData;!function e(a,r,s){a.map(function(a){if(a.parentId=r,n.a.set(a,"treeLevel",s+1),a.treeLevel>=t.maxLevel&&a.children&&a.children.length){var o=!0,l=!1,d=void 0;try{for(var c,h=m()(a.children);!(o=(c=h.next()).done);o=!0){var u=c.value;t.treeData.push(u)}}catch(e){l=!0,d=e}finally{try{!o&&h.return&&h.return()}finally{if(l)throw d}}a.children=[]}t.activeLevels&&t.activeLevels.length&&(a.disabled=-1===t.activeLevels.indexOf(a.treeLevel)),i.datas.set(a.id,a),a.children&&a.children.length&&e(a.children,a.id,a.treeLevel)})}(t.treeData,"",0)}return N()(e,[{key:"toggleTreeBranches",value:function(e){var t=!0,i=!1,a=void 0;try{for(var r,s=m()(this.datas);!(t=(r=s.next()).done);t=!0){var o=r.value,l=v()(o,2)[1];l.children&&l.children.length&&n.a.set(l,"open",e)}}catch(e){i=!0,a=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw a}}}},{key:"filterNodes",value:function(e){var t=this;if(0!==(e=e.trim()).length){var i=function e(i){if(i.parentId){var a=t.getNode(i.parentId);a.open||n.a.set(a,"open",!0),i.visible&&(n.a.set(a,"visible",i.visible),e(a))}},a=!0,r=!1,s=void 0;try{for(var o,l=m()(this.datas);!(a=(o=l.next()).done);a=!0){var d=o.value,c=v()(d,2)[1];n.a.set(c,"visible",-1!==c.label.indexOf(e)),c.visible&&i(c)}}catch(e){r=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw s}}}else{var h=!0,u=!1,p=void 0;try{for(var g,f=m()(this.datas);!(h=(g=f.next()).done);h=!0){var b=g.value,y=v()(b,2)[1];n.a.set(y,"visible",!0)}}catch(e){u=!0,p=e}finally{try{!h&&f.return&&f.return()}finally{if(u)throw p}}}}},{key:"getNode",value:function(e){return this.datas.get(e)}},{key:"changeCheckStatus",value:function(e){var t=this;n.a.set(e,"checked",!e.checked);!function e(i){if(""!==i.parentId){var a=t.getNode(i.parentId);i.checked?n.a.set(a,"checked",t.silibingsAllChecked(a)):n.a.set(a,"checked",!1),e(a)}}(e),function e(t){t.children&&t.children.length&&t.children.forEach(function(i){n.a.set(i,"checked",t.checked),e(i)})}(e)}},{key:"changeHalfCheckStatus",value:function(e){var t=this;n.a.set(e,"checked",!e.checked);!function e(i){if(""!==i.parentId){var a=t.getNode(i.parentId);i.checked?n.a.set(a,"checked",!0):n.a.set(a,"checked",t.silibingsHasChecked(a)),e(a)}}(e),function e(t){t.children&&t.children.length&&t.children.forEach(function(i){n.a.set(i,"checked",t.checked),e(i)})}(e)}},{key:"silibingsAllChecked",value:function(e){var t=!0,i=!0,n=!1,a=void 0;try{for(var r,s=m()(e.children);!(i=(r=s.next()).done);i=!0){var o=r.value;if(t=t&&o.checked,!o.checked)break}}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return t}},{key:"getSilibings",value:function(e){var t=this.getNode(e.parentId);return t?t.children:this.originTreeData}},{key:"silibingsHasChecked",value:function(e){var t=!1,i=!0,n=!1,a=void 0;try{for(var r,s=m()(e.children);!(i=(r=s.next()).done);i=!0){if(r.value.checked){t=!0;break}}}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return t}},{key:"setTreeSelected",value:function(e){if(e instanceof Array||0!==e.length){var t=!0,i=!1,a=void 0;try{for(var r,s=m()(this.datas);!(t=(r=s.next()).done);t=!0){var o=r.value,l=v()(o,2)[1];n.a.set(l,"checked",!1)}}catch(e){i=!0,a=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw a}}var d=void 0,c=!0,h=!1,u=void 0;try{for(var p,g=m()(e);!(c=(p=g.next()).done);c=!0){var f=p.value;(d=this.getNode(f))&&n.a.set(d,"checked",!0)}}catch(e){h=!0,u=e}finally{try{!c&&g.return&&g.return()}finally{if(h)throw u}}}}},{key:"getSelectedNodes",value:function(){var e=new Array,t=!0,i=!1,n=void 0;try{for(var a,r=m()(this.datas);!(t=(a=r.next()).done);t=!0){var s=a.value,o=v()(s,2)[1];o.checked&&e.push(o)}}catch(e){i=!0,n=e}finally{try{!t&&r.return&&r.return()}finally{if(i)throw n}}return e}},{key:"getSelectedNodeIds",value:function(){var e=new Array,t=!0,i=!1,n=void 0;try{for(var a,r=m()(this.datas);!(t=(a=r.next()).done);t=!0){var s=a.value,o=v()(s,2)[1];o.checked&&e.push(o.id)}}catch(e){i=!0,n=e}finally{try{!t&&r.return&&r.return()}finally{if(i)throw n}}return e}},{key:"removeNodeById",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"down",n=this.getNode(e);if(n){var a=this.getSilibings(n),r=void 0;if("up"===i){for(var s=a.length-1;s>=0;s--)if(a[s].id==n.id){r=s;break}}else r=a.findIndex(function(e){return e.id===n.id});a.splice(r,1),t&&this.datas.delete(e)}}},{key:"dragAndDropNode",value:function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.getNode(e),s=this.getNode(t);if(r){if(a)r.children?r.children.unshift(s):n.a.set(r,"children",[s]),n.a.set(r,"open",!0);else{var o=this.getSilibings(r),l=o.findIndex(function(e){return e.id==r.id});"down"==i?o.splice(l+1,0,s):o.splice(l,0,s)}this.removeNodeById(t,!1,i)}}}]),e}(),w={getElementPosition:function(e){try{var t=e.getBoundingClientRect(),i=document.documentElement.clientTop,n=document.documentElement.clientLeft;return{top:t.top-i+window.pageYOffset,bottom:t.bottom-i+window.pageYOffset,left:t.left-n+window.pageXOffset,right:t.right-n+window.pageXOffset,width:t.width,height:t.height}}catch(e){console.error(e)}}},L={name:"tree",mixins:[{data:function(){return{draggingNode:null,droppableNodes:[],startLocation:{}}},methods:{selectstart:function(){return!1},dragstart:function(e){if(this.draggingNode=e.target,this.draggingNode.classList.add("active"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text",this.draggingNode.innerHTML),e.dataTransfer.setDragImage){var t=w.getElementPosition(e.target),i=e.pageX-t.left,n=e.pageY-t.top;e.dataTransfer.setDragImage(e.target,i,n)}return this.startLocation={x:e.pageX,y:e.pageY},!0},dragover:function(e){if(e.preventDefault(),this.draggingNode){var t={x:e.pageX,y:e.pageY},i=w.getElementPosition(this.draggingNode),n=t.y-this.startLocation.y<0;if(t.y>=i.top&&t.y<=i.bottom)e.dataTransfer.dropEffect="none";else{for(var a=void 0,r=0,s=this.droppableNodes.length;r<s;r++){var o=w.getElementPosition(this.droppableNodes[r]);t.y>=o.top&&t.y<=o.bottom?a=this.droppableNodes[r]:(this.droppableNodes[r].style.borderColor="transparent",this.droppableNodes[r].style.background="")}if(a){var l=!1;(a.dataset?a.dataset.level:parseInt(a.getAttribute("data-level")))<this.treeOptions.maxLevel&&(e.ctrlKey||e.metaKey)&&(l=!0);var d="transparent transparent "+this.treeOptions.dragOverStyle.lineColor+" transparent";!l&&n&&(d=this.treeOptions.dragOverStyle.lineColor+" transparent transparent transparent"),a.style.background=this.treeOptions.dragOverStyle.backgroundColor,a.style.borderColor=d}}}return!0},dragenter:function(e){return!0},drop:function(e){if(e.preventDefault(),e.stopPropagation(),this.draggingNode){var t={x:e.pageX,y:e.pageY},i=t.y-this.startLocation.y<0,n=this.getTargetDropNode(t);if(n){var a=!1,r=void 0,s=void 0,o=void 0;n.dataset?(r=n.dataset.level,s=n.dataset.id,o=this.draggingNode.dataset.id):(r=parseInt(n.getAttribute("data-level")),s=n.getAttribute("data-id"),o=this.draggingNode.getAttribute("data-id")),r<this.treeOptions.maxLevel&&(e.ctrlKey||e.metaKey)&&(a=!0),this.status.dragAndDropNode(s,o,i?"up":"down",a),this.initTreeStatus(),this.$nextTick(function(){this.initDragAndDropNodes()})}}},dragend:function(e){return this.clearDragOverStyle(),this.draggingNode&&this.draggingNode.classList.remove("active"),e.dataTransfer.clearData("text"),this.draggingNode=null,this.startLocation=null,!1},clearDragOverStyle:function(){for(var e=0;e<this.droppableNodes.length;e++)this.droppableNodes[e].style.borderColor="transparent",this.droppableNodes[e].style.background=""},getTargetDropNode:function(e){for(var t=void 0,i=0,n=this.droppableNodes.length;i<n;i++){var a=w.getElementPosition(this.droppableNodes[i]);if(e.y>=a.top&&e.y<=a.bottom){t=this.droppableNodes[i];break}}return t},bindEvents:function(){this.targetBox.addEventListener("dragenter",this.dragenter),this.targetBox.addEventListener("dragover",this.dragover),this.targetBox.addEventListener("drop",this.drop);var e=!0,t=!1,i=void 0;try{for(var n,a=m()(this.draggableNodes);!(e=(n=a.next()).done);e=!0){var r=n.value;r.addEventListener("selectstart",this.selectstart),r.addEventListener("dragstart",this.dragstart),r.addEventListener("dragend",this.dragend)}}catch(e){t=!0,i=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw i}}},removeEvents:function(){this.targetBox.removeEventListener("dragenter",this.dragenter),this.targetBox.removeEventListener("dragover",this.dragover),this.targetBox.removeEventListener("drop",this.drop);var e=!0,t=!1,i=void 0;try{for(var n,a=m()(this.draggableNodes);!(e=(n=a.next()).done);e=!0){var r=n.value;r.removeEventListener("selectstart",this.selectstart),r.removeEventListener("dragstart",this.dragstart),r.removeEventListener("dragend",this.dragend)}}catch(e){t=!0,i=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw i}}}}}],props:{treeData:{type:Array,default:function(){return[]}},options:{type:Object,default:function(){}},treeSelectedIds:{type:[String,Number,Array],default:""},maxHeight:{type:[String,Number],default:"none"}},components:{TreeNode:c,MultipleTreeNode:p},model:{prop:"treeSelectedIds",event:"handleCheckedChange"},data:function(){return{status:{},treeSelectedResult:null,searchKeyword:"",defaultOptions:{showSearch:!1,searchPlaceHolder:"",open:!0,multiple:!1,leafOnly:!1,editable:!1,deleteAsynchronously:!1,halfCheck:!1,draggable:!1,dragOverStyle:{lineColor:"#fea051",backgroundColor:"#e4e8fb"},maxLevel:10,activeLevels:null},treeOptions:{},deletePopupVisable:!1,maxHeightVal:"none"}},created:function(){this.initTreeOptions(),this.initTreeStatus(),this.setMaxHeight(),this.treeData.length&&(this.setTreeSelected(),this.status.toggleTreeBranches(this.treeOptions.open))},mounted:function(){this.targetBox=this.$refs.targetBox,this.treeOptions.draggable&&this.initDragAndDropNodes()},beforeDestroy:function(){this.treeOptions.draggable&&this.removeEvents()},methods:{handleAddNode:function(e){this.$emit("on-add-node",e)},handleEditNode:function(e){this.$emit("on-edit-node",e)},handleDeleteNode:function(e){this.deletingNode=e,this.deletePopupVisable=!0},sureDeleteNode:function(){this.treeOptions.deleteAsynchronously||this.status.removeNodeById(this.deletingNode.id),this.$emit("on-delete-node",this.deletingNode),this.deletePopupVisable=!1,this.deletingNode=null},handleCheckedChange:function(e){e.disabled||(this.treeOptions.multiple?(this.treeOptions.halfCheck?this.status.changeHalfCheckStatus(e):this.status.changeCheckStatus(e),this.treeSelectedResult=this.status.getSelectedNodeIds(),this.$emit("handleCheckedChange",this.treeSelectedResult),this.$emit("on-checked-change",e)):(this.treeSelectedResult!=e.id&&(this.treeSelectedResult=e.id,this.$emit("handleCheckedChange",this.treeSelectedResult),this.$emit("on-checked-change",e)),this.$emit("on-checked",e)))},setTreeSelected:function(){this.treeSelectedResult=this.treeSelectedIds,this.treeOptions.multiple&&this.treeSelectedResult instanceof Array&&this.status.setTreeSelected(this.treeSelectedResult)},initTreeOptions:function(){var e={maxLevel:this.defaultOptions.maxLevel,activeLevels:this.defaultOptions.activeLevels};if(e.maxLevel=parseInt(this.options.maxLevel),isNaN(e.maxLevel)&&(e.maxLevel=this.defaultOptions.maxLevel),!this.options.draggable&&!this.options.multiple&&this.options.activeLevels instanceof Array&&this.options.activeLevels.length){var t=this.options.activeLevels.filter(function(e){var t=parseInt(e);return!isNaN(t)&&t>0});t.length&&(e.activeLevels=t)}this.treeOptions=o()({},this.defaultOptions,this.options,e)},initTreeStatus:function(){this.status=new x(r()({treeData:this.treeData},this.treeOptions))},initDragAndDropNodes:function(){try{this.draggableNodes=this.targetBox.querySelectorAll("li"),this.droppableNodes=this.targetBox.querySelectorAll(".node-content"),this.removeEvents(),this.bindEvents()}catch(e){console.error(e)}},setMaxHeight:function(){parseInt(this.maxHeight)&&(this.maxHeightVal=this.maxHeight+"px")}},watch:{searchKeyword:function(e){this.status.filterNodes(e),this.treeOptions.draggable&&this.$nextTick(function(){this.initDragAndDropNodes()})},options:{handler:function(){this.initTreeOptions(),this.initTreeStatus(),this.status.toggleTreeBranches(this.treeOptions.open)},deep:!0},treeData:function(e){this.initTreeStatus(),this.treeOptions.draggable&&this.$nextTick(function(){this.initDragAndDropNodes()}),e.length&&e[0].open!==this.treeOptions.open&&this.status.toggleTreeBranches(this.treeOptions.open),this.treeOptions.showSearch&&this.status.filterNodes(this.searchKeyword)},treeSelectedIds:function(){this.setTreeSelected()},maxHeight:function(){this.setMaxHeight()}}},D={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tree-container"},[e.treeOptions.showSearch?i("div",{staticClass:"icons-box small"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyword,expression:"searchKeyword"}],staticClass:"icons-input",attrs:{type:"text",placeHolder:e.treeOptions.searchPlaceHolder},domProps:{value:e.searchKeyword},on:{input:function(t){t.target.composing||(e.searchKeyword=t.target.value)}}}),e._v(" "),i("i",{staticClass:"icons icons-search"})]):e._e(),e._v(" "),e._t("school-filter"),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.treeData.length,expression:"treeData.length"}],ref:"targetBox",staticClass:"nodes-container",style:{maxHeight:e.maxHeightVal}},[e.treeOptions.multiple?i("multiple-tree-node",{attrs:{"tree-data":e.treeData,options:e.treeOptions},on:{"on-checked-change":e.handleCheckedChange}}):i("tree-node",{attrs:{"tree-data":e.treeData,options:e.treeOptions,"tree-selected-result":e.treeSelectedResult},on:{"on-checked-change":e.handleCheckedChange,"on-add-node":e.handleAddNode,"on-edit-node":e.handleEditNode,"on-delete-node":e.handleDeleteNode}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:0===e.treeData.length,expression:"treeData.length === 0"}],staticClass:"no-data"},[e._v("\n\t\t暂无数据\n\t")]),e._v(" "),e.options.editable?i("div",{directives:[{name:"show",rawName:"v-show",value:e.deletePopupVisable,expression:"deletePopupVisable"}],staticClass:"over-layer",on:{click:function(t){t.stopPropagation(),e.deletePopupVisable=!1}}},[i("div",{staticClass:"layer"},[i("div",{staticClass:"layer-header"},[i("i",{staticClass:"icons icons-close",on:{click:function(t){e.deletePopupVisable=!1}}}),e._v(" "),i("h4",{staticClass:"title"},[e._v("确认")])]),e._v(" "),i("div",{staticClass:"layer-content"},[e._v("\n\t\t\t\t是否删除该节点？\n\t\t\t")]),e._v(" "),i("div",{staticClass:"layer-footer align-right"},[i("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){e.deletePopupVisable=!1}}},[e._v("取消")]),e._v(" "),i("button",{staticClass:"btn btn-main",attrs:{type:"button"},on:{click:e.sureDeleteNode}},[e._v("确定")])])])]):e._e()],2)},staticRenderFns:[]};var O=i("VU/8")(L,D,!1,function(e){i("z7Cd")},"data-v-0ee73110",null).exports,_={name:"treeSelector",props:{treeData:{type:Array,default:function(){return[]}},options:{type:Object,default:function(){}},treeSelectedIds:{type:[String,Number,Array],default:""},placeholder:{type:String,default:"请选择..."},disabled:{type:Boolean,default:!1}},components:{Tree:O},model:{prop:"treeSelectedIds",event:"treeCheckedChange"},data:function(){return{treeSelectedResult:"",treeSelectedText:"",location:{},windowSize:{},visible:!1,popoverWidth:0,maxHeight:"none",defaultPopoverWidth:240,position:"buttom"}},watch:{location:{handler:function(){this.visible&&this.setLayerPosition()},deep:!0},treeSelectedIds:{handler:function(e,t){this.treeSelectedResult=this.treeSelectedIds,this.setSelectorChecked()},deep:!0},windowSize:{handler:function(){this.visible&&(this.getLocation(),this.setLayerPosition())},deep:!0}},methods:{treeCheckedChange:function(e){this.setSelectorChecked(e),this.$emit("treeCheckedChange",this.treeSelectedResult),this.$emit("on-selected-change",e)},stopPropagation:function(e){e.stopPropagation()},getWindowSize:function(){this.windowSize={height:window.innerHeight,width:window.innerWidth}},getLocation:function(){this.location=w.getElementPosition(this.treeSelectorInput)},toggleVisible:function(){this.visible||this.getLocation(),this.visible=!this.visible},hideSelectorLayer:function(){this.visible=!1},setLayerPosition:function(){var e=this.location.height,t=this.location.width,i=this.windowSize.height-this.location.bottom-5,n=this.windowSize.height-i-e;this.maxHeight=(i>n?i:n)+"px",this.popoverWidth=t>this.defaultPopoverWidth?t:this.defaultPopoverWidth,this.position=n>i?"top":"bottom"},setSelectorChecked:function(e){if(this.options.multiple)this.treeSelectedResult instanceof Array&&this.treeSelectedResult.length>0?this.treeSelectedText="已选择"+this.treeSelectedResult.length+"项":this.treeSelectedText="";else if(e)this.treeSelectedText=e.label;else try{(e=this.treeElment&&this.treeElment.status.getNode(this.treeSelectedResult))&&(this.treeSelectedText=e.label)}catch(e){console.error(e)}}},created:function(){this.getWindowSize(),this.popoverWidth=this.defaultPopoverWidth,this.treeSelectedResult=this.treeSelectedIds},mounted:function(){this.treeSelectorInput=this.$refs.treeSelectorInput,this.treeElment=this.$refs.treeElment,this.getLocation(),this.setSelectorChecked(),this.disabled||(document.body.addEventListener("click",this.hideSelectorLayer),window.addEventListener("resize",this.getWindowSize))},updated:function(){null==this.treeElment&&(this.treeElment=this.$refs.treeElment)},beforeDestroy:function(){this.disabled||(document.body.removeEventListener("click",this.hideSelectorLayer),window.removeEventListener("resize",this.getWindowSize))}},E={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tree-selector",class:{up:e.visible&&"top"===e.position}},[i("div",{staticClass:"icons-box small",on:{click:function(t){return t.stopPropagation(),e.toggleVisible(t)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.treeSelectedText,expression:"treeSelectedText"}],ref:"treeSelectorInput",staticClass:"icons-input",attrs:{type:"text",readOnLy:"",placeholder:e.placeholder},domProps:{value:e.treeSelectedText},on:{input:function(t){t.target.composing||(e.treeSelectedText=t.target.value)}}}),e._v(" "),i("i",{staticClass:"icons icons-arrow-down"})]),e._v(" "),i("span",{staticClass:"place-holder"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.disabled&&e.visible,expression:"!disabled && visible"}],staticClass:"tree-selector-layer",style:{width:e.popoverWidth+"px",maxHeight:e.maxHeight},on:{click:function(t){return t.stopPropagation(),e.stopPropagation(t)}}},[e.treeData.length?i("tree",{ref:"treeElment",attrs:{"tree-data":e.treeData,options:e.options},on:{"on-checked-change":e.treeCheckedChange,"on-checked":e.hideSelectorLayer},model:{value:e.treeSelectedResult,callback:function(t){e.treeSelectedResult=t},expression:"treeSelectedResult"}}):i("div",{staticClass:"no-data",on:{click:e.hideSelectorLayer}},[e._v("暂无选项\n\t\t\t")])],1)])])},staticRenderFns:[]};var T={components:{Tree:O,TreeSelector:i("VU/8")(_,E,!1,function(e){i("OGAk")},"data-v-b206df82",null).exports},data:function(){return{treeVals0:"item333",treeVals1:["item0","item1"],treeSelectorVal:"item333",treeSelectorVals:["item0","item1"],options0:{showSearch:!0,editable:!0,draggable:!0,maxLevel:5},options1:{showSearch:!1,multiple:!0,halfCheck:!1},selectorOptions0:{activeLevels:[4,2]},selectorOptions1:{showSearch:!1,multiple:!0,halfCheck:!0},treeData0:[{id:"item0",label:"根节点1",children:[{id:"item1",label:"一级子节点1111"},{id:"item2",label:"一级子节点2"},{id:"item3",label:"一级子节点3",children:[{id:"item31",label:"二级子节点1"},{id:"item32",label:"二级子节点2"},{id:"item33",label:"二级子节点3",children:[{id:"item331",label:"三级子节点1"},{id:"item332",label:"三级子节点2"},{id:"item333",label:"三级子节点3"}]}]},{id:"item4",label:"一级子节点4"},{id:"item5",label:"一级子节点5"}]}],treeData1:[{id:"item0",label:"根节点1",children:[{id:"item1",label:"一级子节点1111"},{id:"item2",label:"一级子节点2"},{id:"item3",label:"一级子节点3",children:[{id:"item31",label:"二级子节点1"},{id:"item32",label:"二级子节点2"},{id:"item33",label:"二级子节点3",children:[{id:"item331",label:"三级子节点1"},{id:"item332",label:"三级子节点2"},{id:"item333",label:"三级子节点3"}]},{id:"item34",label:"二级子节点4"}]},{id:"item4",label:"一级子节点4"},{id:"item5",label:"一级子节点5"}]},{id:"root0",label:"根节点2",children:[{id:"root1",label:"一级子节点1111"},{id:"root2",label:"一级子节点2"}]}],selectorTreeData0:[{id:"item0",label:"根节点1",children:[{id:"item1",label:"一级子节点1111"},{id:"item2",label:"一级子节点2"},{id:"item3",label:"一级子节点3",children:[{id:"item31",label:"二级子节点1"},{id:"item32",label:"二级子节点2"},{id:"item33",label:"二级子节点3",children:[{id:"item331",label:"三级子节点1"},{id:"item332",label:"三级子节点2"},{id:"item333",label:"三级子节点3"}]}]},{id:"item4",label:"一级子节点4"},{id:"item5",label:"一级子节点5"}]}],selectorTreeData1:[{id:"item0",label:"根节点1",children:[{id:"item1",label:"一级子节点1111"},{id:"item2",label:"一级子节点2"},{id:"item3",label:"一级子节点3",children:[{id:"item31",label:"二级子节点1"},{id:"item32",label:"二级子节点2"},{id:"item33",label:"二级子节点3",children:[{id:"item331",label:"三级子节点1"},{id:"item332",label:"三级子节点2"},{id:"item333",label:"三级子节点3"}]}]},{id:"item4",label:"一级子节点4"},{id:"item5",label:"一级子节点5"}]}]}},methods:{handleCheckedChange0:function(e){console.log("you had checked: "+this.treeVals0)},handleCheckedChange1:function(e){console.log("you had checked: [ "+this.treeVals1+" ]")},handleSelectedChange0:function(e){console.log("you had selected: "+this.treeSelectorVal)},handleSelectedChange1:function(e){console.log("you had selected: [ "+this.treeSelectorVals+" ]")},addNode:function(e){console.log("addNode: add a child to this node "+e.id)},editNode:function(e){console.log("editNode: "+e.id)},deleteNode:function(e){console.log("deleted node: "+e.id)}}},A={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h2",{staticClass:"title"},[e._v("树形结构")]),e._v(" "),i("div",{staticClass:"clearfix"},[i("tree",{staticClass:"float-left",attrs:{"tree-data":e.treeData0,options:e.options0},on:{"on-checked-change":e.handleCheckedChange0,"on-add-node":e.addNode,"on-edit-node":e.editNode,"on-delete-node":e.deleteNode},model:{value:e.treeVals0,callback:function(t){e.treeVals0=t},expression:"treeVals0"}}),e._v(" "),i("tree",{staticClass:"float-left",attrs:{"tree-data":e.treeData1,options:e.options1},on:{"on-checked-change":e.handleCheckedChange1},model:{value:e.treeVals1,callback:function(t){e.treeVals1=t},expression:"treeVals1"}})],1),e._v(" "),i("h2",{staticClass:"title"},[e._v("树形下拉框")]),e._v(" "),i("div",{staticClass:"clearfix"},[i("tree-selector",{staticClass:"float-left",attrs:{placeholder:"请选择...","tree-data":e.selectorTreeData0,options:e.selectorOptions0},on:{"on-selected-change":e.handleSelectedChange0},model:{value:e.treeSelectorVal,callback:function(t){e.treeSelectorVal=t},expression:"treeSelectorVal"}}),e._v(" "),i("tree-selector",{staticClass:"float-left",attrs:{placeholder:"请选择...","tree-data":e.selectorTreeData1,options:e.selectorOptions1},on:{"on-selected-change":e.handleSelectedChange1},model:{value:e.treeSelectorVals,callback:function(t){e.treeSelectorVals=t},expression:"treeSelectorVals"}})],1)])},staticRenderFns:[]};var P={name:"App",components:{TreeDemo:i("VU/8")(T,A,!1,function(e){i("IfIm")},"data-v-64610c2b",null).exports}},I={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("tree-demo")],1)},staticRenderFns:[]};var V=i("VU/8")(P,I,!1,function(e){i("cMm6")},null,null).exports;i("u74A");n.a.config.productionTip=!1,new n.a({el:"#app",render:function(e){return e(V)}})},OGAk:function(e,t){},cMm6:function(e,t){},hhLE:function(e,t){},u74A:function(e,t){},z7Cd:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.71dbd11a6de5b1abfe00.js.map